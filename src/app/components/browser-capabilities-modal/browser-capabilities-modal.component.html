<div class="modal-overlay" *ngIf="showModal" (click)="closeModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h2>ğŸ” Capacidades del Navegador</h2>
      <button class="close-btn" (click)="closeModal()">&times;</button>
    </div>
    
    <div class="modal-body" *ngIf="capabilities">
      <!-- InformaciÃ³n del navegador -->
      <div class="info-section">
        <h3>ğŸ“± InformaciÃ³n del Dispositivo</h3>
        <div class="info-grid">
          <div class="info-item">
            <span class="label">Navegador:</span>
            <span class="value">{{ capabilities.browser.name }} v{{ capabilities.browser.version }}</span>
          </div>
          <div class="info-item">
            <span class="label">Plataforma:</span>
            <span class="value">{{ capabilities.browser.platform }}</span>
          </div>
          <div class="info-item">
            <span class="label">Dispositivo:</span>
            <span class="value">{{ capabilities.browser.mobile ? 'ğŸ“± MÃ³vil' : 'ğŸ’» Escritorio' }}</span>
          </div>
        </div>
      </div>

      <!-- Capacidades WebP -->
      <div class="info-section">
        <h3>ğŸ¨ Soporte de ImÃ¡genes WebP</h3>
        <div class="capabilities-grid">
          <div class="capability-item" [class.supported]="capabilities.webP.lossy">
            <span class="icon">{{ capabilities.webP.lossy ? 'âœ…' : 'âŒ' }}</span>
            <div class="capability-info">
              <strong>WebP Lossy</strong>
              <p>CompresiÃ³n con pÃ©rdida (mejor para fotos)</p>
            </div>
          </div>
          <div class="capability-item" [class.supported]="capabilities.webP.lossless">
            <span class="icon">{{ capabilities.webP.lossless ? 'âœ…' : 'âŒ' }}</span>
            <div class="capability-info">
              <strong>WebP Lossless</strong>
              <p>Sin pÃ©rdida de calidad (mejor para grÃ¡ficos)</p>
            </div>
          </div>
          <div class="capability-item" [class.supported]="capabilities.webP.animation">
            <span class="icon">{{ capabilities.webP.animation ? 'âœ…' : 'âŒ' }}</span>
            <div class="capability-info">
              <strong>WebP Animado</strong>
              <p>Soporte para GIFs en formato WebP</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Capacidades tÃ©cnicas -->
      <div class="info-section">
        <h3>âš™ï¸ Capacidades TÃ©cnicas</h3>
        <div class="capabilities-grid">
          <div class="capability-item" [class.supported]="capabilities.canvas.supported">
            <span class="icon">{{ capabilities.canvas.supported ? 'âœ…' : 'âŒ' }}</span>
            <div class="capability-info">
              <strong>Canvas 2D</strong>
              <p>Procesamiento de imÃ¡genes</p>
            </div>
          </div>
          <div class="capability-item" [class.supported]="capabilities.canvas.webgl">
            <span class="icon">{{ capabilities.canvas.webgl ? 'âœ…' : 'âŒ' }}</span>
            <div class="capability-info">
              <strong>WebGL</strong>
              <p>AceleraciÃ³n por GPU</p>
            </div>
          </div>
          <div class="capability-item" [class.supported]="capabilities.canvas.imageBitmapSupported">
            <span class="icon">{{ capabilities.canvas.imageBitmapSupported ? 'âœ…' : 'âŒ' }}</span>
            <div class="capability-info">
              <strong>ImageBitmap</strong>
              <p>Procesamiento asÃ­ncrono optimizado</p>
            </div>
          </div>
          <div class="capability-item" [class.supported]="capabilities.camera.supported">
            <span class="icon">{{ capabilities.camera.supported ? 'âœ…' : 'âŒ' }}</span>
            <div class="capability-info">
              <strong>CÃ¡mara Web</strong>
              <p>Acceso a la cÃ¡mara del dispositivo</p>
            </div>
          </div>
          <div class="capability-item" [class.supported]="capabilities.download.linkDownloadSupported">
            <span class="icon">{{ capabilities.download.linkDownloadSupported ? 'âœ…' : 'âŒ' }}</span>
            <div class="capability-info">
              <strong>Descarga AutomÃ¡tica</strong>
              <p>Guardar imÃ¡genes procesadas</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Formato recomendado -->
      <div class="info-section recommendation">
        <h3>ğŸ’¡ ConfiguraciÃ³n Recomendada</h3>
        <div class="recommendation-content">
          <div class="format-info">
            <strong>Formato de imagen:</strong> 
            <span class="format-badge" [class.webp]="capabilities.webP.supported">
              {{ capabilities.webP.supported ? 'WebP' : 'JPEG' }}
            </span>
          </div>
          <div class="quality-info">
            <strong>Calidad Ã³ptima:</strong> 
            <span class="quality-value">
              {{ capabilities.webP.supported ? '90%' : '85%' }}
            </span>
          </div>
          <div class="size-info">
            <strong>TamaÃ±o esperado:</strong> 
            <span class="size-value">
              {{ capabilities.webP.supported ? '7-14KB' : '25-30KB' }} por imagen 300x300
            </span>
          </div>
          <div class="download-info" *ngIf="capabilities.download.linkDownloadSupported">
            <strong>ğŸ“¥ Descarga automÃ¡tica:</strong> 
            <span class="download-enabled">Activada - Las imÃ¡genes 300x300 se guardarÃ¡n automÃ¡ticamente</span>
          </div>
        </div>
      </div>
    </div>
    
    <div class="modal-footer">
      <button class="btn-primary" (click)="closeModal()">Entendido</button>
      <small>Esta informaciÃ³n se usa para optimizar la detecciÃ³n de placas</small>
    </div>
  </div>
</div>
